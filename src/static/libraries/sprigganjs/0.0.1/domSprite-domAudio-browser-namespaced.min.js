function SprigganContentManager(a,b,c){function d(a){e(),c(a)}function e(){if(f)throw new Error("This ContentManager has already been disposed");for(f=!0;i.length;)i.pop().dispose()}var f=!1,g=0,h=0,i={},j={load:function(a,c){if(f)throw new Error("Cannot add to a ContentManager once disposed");if(g)throw new Error("Cannot add to a ContentManager once loading has started");for(var e in i)if(c==e){if(i[c].constructorFunction==a)return j;throw new Error("The same url cannot be used with two distinct content constructor functions")}return h++,i[c]={dispose:a(c,function(a){i[c].value=a,g++,g==h&&b()},d),constructorFunction:a},j},get:function(a,b){if(f)throw new Error("Cannot get from a ContentManager once disposed");if(g<h)throw new Error("Cannot get from a ContentManager while loading");for(var c in i)if(b==c){if(i[b].constructorFunction!=a)throw new Error("An incorrect constructor function was given when getting content");return i[c].value}throw new Error("No matching content was loaded")},dispose:e};return j}function SprigganEventOnce(){var a=[],b=null;return{raise:function(){if(null===b)for(b=arguments;a.length;)a.pop().apply(null,b)},listen:function(c){null!==b?c.apply(null,b):a.push(c)}}}function SprigganEventRecurring(){var a=[],b=[];return{raise:function(){var c=arguments,d=b;b=[];for(var e=0;e<a.length;e++)a[e].apply(null,c);for(var e=0;e<d.length;e++)d[e].apply(null,c)},listen:function(b){a.push(b)},listenOnce:function(a){b.push(a)}}}function SprigganLinearInterpolate(a,b,c,d,e){var f,g=SprigganTimer(c,function(){f&&clearInterval(f),d(b),e&&e()});return{pause:function(){f&&(clearInterval(f),f=null,g.pause())},resume:function(){f||(f=setInterval(function(){d(a+(b-a)*g.progress())},50),g.resume())},elapsed:g.elapsed,progress:g.progress}}function SprigganPrint(a,b,c,d,e,f){for(var g=0,h=0,i=0;i<f.length;i++){var j=f.charAt(i);switch(j){case"\n":g=0,h+=e;break;default:var k=SprigganSprite(a,b,c);SprigganMove(k,g,h),SprigganLoop(k,j);case" ":g+=d;break;case"\t":g+=4*d}}}function SprigganTimer(a,b,c,d){function e(){return i?f:Math.min(f,h+(j?(new Date).getTime()-g:0))}var f=1e3*a,g=null,h=0,i=!1,j=null;return{pause:function(){j&&(h+=(new Date).getTime()-g,g=null,clearTimeout(j),j=null,c&&c())},resume:function(){j||i||(j=setTimeout(function(){i=!0,j=null,b&&b()},f-e()),g=(new Date).getTime(),d&&d())},elapsed:function(){return e()/1e3},progress:function(){return a?e()/f:1}}}function SprigganContentImage(a,b,c){function d(){e&&(e.onload=null,e.onerror=null,e.src="",e=null)}var e=new Image;return e.onload=function(){e.onload=null,e.onerror=null,b(e)},e.onerror=function(){c('Failed to download "'+a+'" as an image')},e.src=a,d}function SprigganContentSpriteSheet(a,b,c){function d(){f.animations&&f.image&&(b(f),e())}function e(){g&&g(),h&&h(),g=h=f=null}var f={},g=SprigganContentJson(a+".json",function(a){f.animations={};for(var b in a.animations){for(var c=a.animations[b],e=[],g=0;g<c.length;g++){var h=a.frames[c[g]];e.push({imageLeft:-h[0]+"em",imageTop:-h[1]+"em",wrapperWidth:1+h[2]-h[0]+"em",wrapperHeight:1+h[3]-h[1]+"em",wrapperMarginLeft:h[0]-h[4]+"em",wrapperMarginTop:h[1]-h[5]+"em",duration:h[6]})}f.animations[b]=e}d()},c),h=SprigganContentImage(a+".png",function(a){if(f.image=a.cloneNode(!0),f.image.style.touchAction="manipulation","imageRendering"in f.image.style)f.image.style.imageRendering="pixelated",f.image.style.imageRendering="-moz-crisp-edges";else if("msInterpolationMode"in f.image.style)f.image.style.msInterpolationMode="nearest-neighbor";else{var b=document.createElement("CANVAS");b.width=4*a.width,b.height=4*a.height;var c=b.getContext("2d");c.msImageSmoothingEnabled=!1,c.drawImage(a,0,0,4*a.width,4*a.height),f.image.src=b.toDataURL("image/png")}f.image.style.position="absolute",f.image.style.width=a.width+"em",f.image.style.height=a.height+"em",d()},c);return e}function SprigganGroup(a,b){var c=document.createElement("DIV");c.style.position="absolute",c.style.touchAction="manipulation",b&&(c.onclick=function(){SprigganEventWasTriggeredByUserInteraction=!0,b(),SprigganEventWasTriggeredByUserInteraction=!1}),a.element.appendChild(c);var d={element:c,paused:!1,movement:null,x:function(){return 0},y:function(){return 0},children:[],parent:a};return a.children.push(d),d}function SprigganMove(a,b,c){a.movement&&(a.movement.pause(),a.movement=null),"transform"in a.element.style?a.element.style.transform="translate("+b+"em, "+c+"em)":(a.element.style.left=b+"em",a.element.style.top=c+"em"),a.x=function(){return b},a.y=function(){return c}}function SprigganPause(a){if(a.movement&&a.movement.pause(),a.animation&&a.animation.pause(),a.paused=!0,a.children)for(var b=0;b<a.children.length;b++)SprigganPause(a.children[b])}function SprigganResume(a){if(a.movement&&a.movement.resume(),a.animation&&a.animation.resume(),a.paused=!1,a.children)for(var b=0;b<a.children.length;b++)SprigganResume(a.children[b])}function SprigganMoveOverSeconds(a,b,c,d,e){a.movement&&a.movement.pause();var f,g=a.x(),h=a.y(),i=a.x=function(){return g+(b-g)*f.progress()},j=a.y=function(){return h+(c-h)*f.progress()};"transform"in a.element.style?(a.element.offsetHeight,f=a.movement=SprigganTimer(d,e,function(b){a.element.style.transition="initial",a.element.style.transform="translate("+i()+"em, "+j()+"em)"},function(e){a.element.style.transition="transform "+(d-f.elapsed())+"s linear",a.element.style.transform="translate("+b+"em, "+c+"em)"})):f=a.movement=SprigganLinearInterpolate(0,1,d,function(b){a.element.style.left=i()+"em",a.element.style.top=j()+"em"},e),a.paused||f.resume()}function SprigganMoveAtPixelsPerSecond(a,b,c,d,e){a.movement&&a.movement.pause();var f=a.x(),g=a.y(),h=Math.sqrt((b-f)*(b-f)+(c-g)*(c-g));SprigganMoveOverSeconds(a,b,c,h/d,e)}function SprigganRemove(a){SprigganPause(a),a.element.parentNode.removeChild(a.element),a.parent&&a.parent.children.splice(a.parent.children.indexOf(a),1),a.parent||SprigganAllViewports.splice(SprigganAllViewports.indexOf(a),1)}function SprigganOrder(a,b){a.element.style.zIndex=b}function SprigganAcceptClicks(a){a.element.style.pointerEvents="auto"}function SprigganIgnoreClicks(a){a.element.style.pointerEvents="none"}function SprigganSprite(a,b,c,d){var e=document.createElement("DIV");e.style.position="absolute",e.style.overflow="hidden",e.style.touchAction="manipulation",d&&(e.onclick=function(){SprigganEventWasTriggeredByUserInteraction=!0,d(),SprigganEventWasTriggeredByUserInteraction=!1});var f=b.get(SprigganContentSpriteSheet,c),g=f.image.cloneNode(!0);e.appendChild(g),a.element.appendChild(e);var h={element:e,imageElement:g,animations:f.animations,movement:null,animation:null,x:function(){return 0},y:function(){return 0},paused:!1,container:a};return a.children.push(h),h}function SprigganPlay(a,b,c){function d(){if(f==e.length)a.animation=null,c&&c();else{var b=e[f++];a.imageElement.style.left=b.imageLeft,a.imageElement.style.top=b.imageTop,a.element.style.width=b.wrapperWidth,a.element.style.height=b.wrapperHeight,a.element.style.marginLeft=b.wrapperMarginLeft,a.element.style.marginTop=b.wrapperMarginTop,a.animation=SprigganTimer(b.duration,d),a.paused||a.animation.resume()}}null!=a.animation&&a.animation.pause();var e=a.animations[b],f=0;d()}function SprigganLoop(a,b){function c(){Play(a,b,c)}a.animations[b].length>1?c():Play(a,b)}function SprigganViewport(a,b,c,d){function e(){f.style.fontSize=Math.min((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)/a,(window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight)/b)+"px"}var f=document.createElement("DIV");switch(f.style.position="fixed",f.style.width=a+"em",f.style.height=b+"em",f.style.overflow="hidden",c){case"left":f.style.left=0;break;case"right":f.style.right=0;break;default:f.style.left="50%",f.style.marginLeft=a/-2+"em"}switch(d){case"top":f.style.top=0;break;case"bottom":f.style.bottom=0;break;default:f.style.top="50%",f.style.marginTop=b/-2+"em"}document.body.appendChild(f),e();var g={element:f,children:[],resize:e};return SprigganAllViewports.push(g),g}function SprigganContentMusic(a,b,c){function d(){e.onloadeddata=null,e.onerror=null,e.src="",e=null}if(!SprigganEventWasTriggeredByUserInteraction)throw new Error("Some platforms only support loading audio from a click/touch event");if(window.Audio){var e=new Audio;return e.onloadeddata=function(){e.onloadeddata=null,e.onerror=null,b({play:function(){e.play()},pause:function(){e.pause()}})},e.onerror=function(){c('Failed to download "'+a+'" as music')},e.loop=!0,e.src=a,e.load(),d}return setTimeout(function(){b({play:function(){},pause:function(){}})},0),function(){}}function SprigganContentSound(a,b,c){function d(){e.onloadeddata=null,e.onerror=null,e.src="",e=null}if(!SprigganEventWasTriggeredByUserInteraction)throw new Error("Some platforms only support loading audio from a click/touch event");if(window.Audio){var e=new Audio;return e.onloadeddata=function(){e.onloadeddata=null,e.onerror=null,b(function(){e.play()})},e.onerror=function(){c('Failed to download "'+a+'" as a sound')},e.src=a,e.load(),d}return setTimeout(function(){b(function(){})},0),function(){}}function SprigganContentJson(url,onSuccess,onFailure){return SprigganContentText(url,function(text){var json,succeeded=!1;try{json=window.JSON?JSON.parse(text):eval("("+text+")"),succeeded=!0}catch(e){onFailure('Failed to parse "'+url+'" as JSON')}succeeded&&onSuccess(json)},onFailure)}function SprigganContentText(a,b,c){function d(){e&&(e.onreadystatechange=null,e=null)}var e=new XMLHttpRequest;return e.onreadystatechange=function(){4==e.readyState&&(e.status>=200&&e.status<=299?b(e.responseText):c('Failed to download "'+a+'" as text; HTTP status code '+e.status+" was returned"))},e.open("GET",a,!0),e.send(),d}var SprigganEventWasTriggeredByUserInteraction=!1,SprigganAllViewports=[];window.onresize=function(){for(var a=0;a<SprigganAllViewports.length;a++)SprigganAllViewports[a].resize()},function(){function a(a){var b=document.getElementById("loading");b&&(b.textContent=a,b.innerText=a)}a("Downloading scripts..."),document.body.style.transition="background 1s",document.body.style.backgroundColor="black",document.getElementById("loading").style.transition="color 1s",document.getElementById("loading").style.color="white",window.onload=function(){document.body.removeChild(document.getElementById("loading")),SprigganJSBoot()}}(),window.onerror=function(){for(alert.apply(window,arguments);SprigganAllViewports.length;)SprigganRemove(SprigganAllViewports[0])};